# Environment configuration for Biological Memory Pipeline
# Copy this file to .env and update with your actual values
# Do not commit the .env file to version control

# ===========================================
# DATABASE CONFIGURATION
# ===========================================

# Primary PostgreSQL Database Connection (SINGLE SOURCE OF TRUTH)
# Replace with your actual database connection details
POSTGRES_DB_URL=postgresql://codex_user:your_password_here@localhost:5432/codex_db

# Legacy/Alternative Database Variables (used by some components)
# These should match the POSTGRES_DB_URL above
DATABASE_URL=postgresql://codex_user:your_password_here@localhost:5432/codex_db
DB_CONN=postgresql://codex_user:your_password_here@localhost:5432/codex_db

# Individual PostgreSQL Components (for DuckDB secrets)
# These variables are used by some SQL scripts that create DuckDB secrets
# PostgreSQL server hostname or IP address
POSTGRES_HOST=localhost
# PostgreSQL database name
POSTGRES_DB=codex_db
# PostgreSQL username for authentication
POSTGRES_USER=codex_user
# PostgreSQL password for authentication
POSTGRES_PASSWORD=your_password_here
# Legacy database name variable (matches POSTGRES_DB)
DB_NAME=codex_db
# Legacy database user variable (matches POSTGRES_USER)
DB_USER=codex_user
# Legacy database password variable (matches POSTGRES_PASSWORD)
DB_PASS=your_password_here
# Legacy host variable (matches POSTGRES_HOST)
HOST=localhost

# Test Database Configuration
# Use a separate database for testing to avoid data conflicts
TEST_DATABASE_URL=postgresql://codex_test_user:test_password_here@localhost:5432/codex_test_db
# Test database name for isolated testing
TEST_DB_NAME=codex_test_db
# Test database user for authentication
TEST_DB_USER=codex_test_user
# Test database password for authentication
TEST_DB_PASS=test_password_here
# PostgreSQL template to use when creating test database
TEST_DB_TEMPLATE=template0
# Maximum database connections for test environment
TEST_MAX_DB_CONNECTIONS=20

# Database Connection Pool Configuration
MAX_DB_CONNECTIONS=160

# ===========================================
# DUCKDB CONFIGURATION
# ===========================================

# DuckDB Database Paths
DUCKDB_PATH=./biological_memory/dbs/memory.duckdb
LLM_CACHE_PATH=./biological_memory/dbs/llm_cache.duckdb

# ===========================================
# OLLAMA LLM CONFIGURATION
# ===========================================

# Ollama Server Configuration
OLLAMA_URL=http://localhost:11434
OLLAMA_MODEL=gpt-oss:20b
OLLAMA_GENERATION_TIMEOUT_SECONDS=300

# Embedding Service Configuration
EMBEDDING_PROVIDER=ollama
EMBEDDING_MODEL=nomic-embed-text
EMBEDDING_BASE_URL=http://localhost:11434
EMBEDDING_TIMEOUT_SECONDS=300

# Backup OpenAI Configuration (if needed)
OPENAI_API_KEY=your_openai_api_key_here

# ===========================================
# dbt CONFIGURATION
# ===========================================

DBT_PROFILES_DIR=~/.dbt
DBT_PROJECT_DIR=./biological_memory

# ===========================================
# SERVER CONFIGURATION
# ===========================================

# Port Configuration
HTTP_PORT=8080
MCP_PORT=13513

# System Configuration
AUTO_MIGRATE=false
MIGRATION_DIR=./migration/migrations
LOG_LEVEL=debug

# MCP Authentication
MCP_AUTH_ENABLED=false
MCP_JWT_SECRET=generate_your_own_jwt_secret_here
MCP_CIRCUIT_BREAKER_ENABLED=false

# ===========================================
# CONFIGURATION NOTES
# ===========================================

# STANDARDIZED MODEL NAMES:
# - Primary LLM: gpt-oss:20b (for production)
# - Test LLM: qwen2.5:0.5b (lightweight for testing)
# - Embedding: nomic-embed-text

# TIMEOUT STANDARDIZATION:
# - OLLAMA_GENERATION_TIMEOUT_SECONDS: LLM generation timeout
# - EMBEDDING_TIMEOUT_SECONDS: Embedding generation timeout

# DATABASE URL HIERARCHY:
# 1. POSTGRES_DB_URL (primary, single source of truth)
# 2. DATABASE_URL, DB_CONN (legacy compatibility)
# 3. Individual components (POSTGRES_HOST, etc.) for secrets

# Biological Parameters (optional - primarily set in dbt_project.yml)
# Uncomment and customize if needed:
# WORKING_MEMORY_CAPACITY=7
# STM_DURATION_MINUTES=30
# CONSOLIDATION_THRESHOLD=0.5
# HEBBIAN_LEARNING_RATE=0.1
# FORGETTING_RATE=0.05